<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">

<h:head>
    <title>Schedule</title>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8"/>
</h:head>

<h:body>

    <h:form id="scheduleForm">

        <h:outputText value="Schedule for station #{scheduleController.recieveSchedule().name}:"/><br/><br/>
        <h:outputText value="Departures:"/><br/>
        <h:outputText value=""/>

        <h:dataTable value="#{scheduleController.scheduleDto.from}" var="board">

            <h:column>
                <f:facet name="header">
                    <h:outputText value="Board name"/>
                </f:facet>
                <h:outputText value="#{board.name}"/>
            </h:column>

            <h:column>
                <f:facet name="header">
                    <h:outputText value="Departure time"/>
                </f:facet>
                <h:outputText value="#{board.departure}"/>
            </h:column>

            <h:column>
                <f:facet name="header">
                    <h:outputText value="Destination"/>
                </f:facet>
                <h:outputText value="#{board.to}"/>
            </h:column>

            <h:column>
                <f:facet name="header">
                    <h:outputText value="Status"/>
                </f:facet>
                <h:outputText value="#{board.status}"/>
            </h:column>

        </h:dataTable>

        <br/><h:outputText value="Arrivals:"/><br/>

        <h:dataTable value="#{scheduleController.scheduleDto.to}" var="board">

            <h:column>
                <f:facet name="header">
                    <h:outputText value="Board name"/>
                </f:facet>
                <h:outputText value="#{board.name}"/>
            </h:column>

            <h:column>
                <f:facet name="header">
                    <h:outputText value="Expected arrival"/>
                </f:facet>
                <h:outputText value="#{board.expectedArrival}"/>
            </h:column>

            <h:column>
                <f:facet name="header">
                    <h:outputText value="Origin"/>
                </f:facet>
                <h:outputText value="#{board.from}"/>
            </h:column>

            <h:column>
                <f:facet name="header">
                    <h:outputText value="Arrival"/>
                </f:facet>
                <h:outputText value="#{board.arrival}"/>
            </h:column>

            <h:column>
                <f:facet name="header">
                    <h:outputText value="Status"/>
                </f:facet>
                <h:outputText value="#{board.status}"/>
            </h:column>

        </h:dataTable>

    </h:form>

    <h:form id="hiddenForm" style="display:none">
        <h:commandButton id="updateSchedule">
            <f:ajax render=":scheduleForm" />
        </h:commandButton>
    </h:form>

</h:body>

<h:outputScript target="body">
    setInterval(function() {
        document.getElementById("hiddenForm:updateSchedule").click();
    }, 3000);
</h:outputScript>

</html>